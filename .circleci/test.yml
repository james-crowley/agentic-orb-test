version: 2.1

orbs:
  agentic-cli: cci-labs/agentic-cli@0.0.9

jobs:
  test-environment-variables:
    docker:
      - image: cimg/base:current
    environment:
      WEBHOOK_BODY: << pipeline.trigger_parameters.webhook.body >>
      TRIGGER_SOURCE: << pipeline.trigger_source >>
    steps:
      - checkout      
      - run:
          name: "Print Environment Variables"
          command: |
            echo "=== Environment Variables Debug ==="
            echo "WEBHOOK_BODY: $WEBHOOK_BODY"
            echo "TRIGGER_SOURCE: $TRIGGER_SOURCE"
            
            # Safely check for optional variables
            if [ -n "${CIRCLE_PIPELINE_ID:-}" ]; then
              echo "CIRCLE_PIPELINE_ID: $CIRCLE_PIPELINE_ID"
            else
              echo "CIRCLE_PIPELINE_ID: Not available"
            fi
            
            if [ -n "${CIRCLE_WORKFLOW_ID:-}" ]; then
              echo "CIRCLE_WORKFLOW_ID: $CIRCLE_WORKFLOW_ID"
            else
              echo "CIRCLE_WORKFLOW_ID: Not available"
            fi

workflows:
  test-workflow:
    jobs:
      - test-environment-variables